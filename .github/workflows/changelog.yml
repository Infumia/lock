---
name: "Update Changelog"
"on":
  push:
    tags:
    - "[0-9]+.[0-9]+.[0-9]+"
jobs:
  release:
    runs-on: "ubuntu-latest"
    if: "${{ !contains(github.event.head_commit.message, 'skip-snapshot') }}"
    steps:
    - uses: "actions/checkout@v4"
      with:
        fetch-depth: 0
    - name: "Generate Changelog"
      id: "changelog"
      uses: "mikepenz/release-changelog-builder-action@v5"
      with:
        configuration: ".github/changelog-config.json"
      env:
        GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
    - name: "Create Release"
      uses: "softprops/action-gh-release@v2"
      with:
        tag_name: "${{ github.ref_name }}"
        name: "${{ github.ref_name }}"
        body: "${{ steps.changelog.outputs.changelog }}"
        prerelease: true
      env:
        GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
